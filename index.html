<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Spring Trapping 2026</title>
  <link rel="icon" type="image/png" href="./icon.png" />

  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    :root {
      --sidebar-w: 360px;
      --border: #e5e5e5;
      --shadow: 0 8px 24px rgba(0,0,0,.12);
      --radius: 14px;
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: #fff;
    }

    /* =========================
       DESKTOP LAYOUT
    ========================= */

    .layout {
      height: 100%;
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
    }

    #sidebar {
      border-right: 1px solid var(--border);
      overflow: auto;
      padding: 12px;
      background: #fff;
    }

    #map {
      height: 100%;
      width: 100%;
    }

    /* Hide mobile header on desktop */
    .mobile-header {
      display: none;
    }

    /* =========================
       SIDEBAR UI
    ========================= */

    .topbar {
      margin-bottom: 12px;
    }

    .topbar input,
    .topbar select,
    .topbar button {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 10px;
      font-size: 14px;
      box-sizing: border-box;
      background: #fff;
    }

    .secondary-btn {
      background: #f7f7f7 !important;
      cursor: pointer;
    }

    .about-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 16px;
      background: rgba(0, 0, 0, 0.45);
      z-index: 3000;
    }

    .about-modal.open {
      display: flex;
    }

    .about-card {
      width: min(760px, 100%);
      max-height: 90vh;
      overflow: auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: var(--shadow);
      border: 1px solid #e9e9e9;
      padding: 16px;
      box-sizing: border-box;
    }

    .about-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .about-title {
      font-size: 20px;
      font-weight: 700;
    }

    .about-close {
      width: auto !important;
      min-width: 42px;
      cursor: pointer;
    }

    .about-body p {
      margin: 0 0 10px;
      line-height: 1.5;
      color: #2d2d2d;
    }

    .about-body h3 {
      margin: 16px 0 8px;
      font-size: 16px;
    }

    .about-body a {
      color: #0b67c2;
      word-break: break-all;
    }

    .row {
      display: grid;
      gap: 8px;
    }

    .hint {
      color: #666;
      font-size: 12px;
      margin: 6px 2px 0;
    }

    .item {
      padding: 10px;
      border: 1px solid #eee;
      border-radius: 12px;
      margin-bottom: 10px;
      cursor: pointer;
      background: #fff;
    }

    .item:hover {
      background: #fafafa;
    }

    .name {
      font-weight: 700;
      margin-bottom: 4px;
    }

    .desc {
      color: #444;
      font-size: 13px;
    }

    .small {
      color: #666;
      font-size: 12px;
      margin-top: 6px;
      word-break: break-word;
    }

    /* =========================
       MOBILE LAYOUT
    ========================= */

    @media (max-width: 900px) {

      .layout {
        grid-template-columns: 1fr;
      }

      #map {
        height: 100vh;
        width: 100vw;
      }

      #sidebar {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;

        border-right: none;
        border-top: 1px solid var(--border);
        border-radius: var(--radius) var(--radius) 0 0;

        background: #fff;
        box-shadow: var(--shadow);

        max-height: 55vh;

        transform: translateY(calc(55vh - 52px));
        transition: transform 180ms ease;

        z-index: 1000;
      }

      #sidebar.open {
        transform: translateY(0);
      }

      /* show mobile header ONLY on mobile */
      .mobile-header {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 10px;
        align-items: center;
        margin-bottom: 10px;
      }

      .mobile-title {
        font-weight: 700;
        font-size: 14px;
      }

      #togglePanel {
        width: auto;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid #ddd;
        background: #fff;
      }

      /* Floating "Lijst" button when panel is closed */
      #openListBtn {
        position: fixed;
        right: 12px;
        bottom: calc(12px + env(safe-area-inset-bottom));
        padding: 10px 14px;
        border-radius: 999px;
        border: 1px solid #ddd;
        background: #fff;
        box-shadow: var(--shadow);
        z-index: 1100;
        display: none;
      }

      body.panel-closed #openListBtn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      body.panel-closed #togglePanel {
        display: none;
      }
    }
  </style>
</head>

<body>

  <div class="layout">

    <aside id="sidebar" class="open">

      <!-- Mobile-only header -->
      <div class="mobile-header">
        <div class="mobile-title">Spring Trapping 2026</div>
        <button id="togglePanel" type="button">Kaart</button>
      </div>

      <div class="topbar row">

        <select id="datasetSelect">
          <option value="focus">Focus Gemeenten</option>
          <option value="hotspot">Focus Hot Spots</option>
          <option value="noord">Noord-Nederland</option>
          <option value="midden">Midden-Nederland</option>
          <option value="zh">Zuid-Holland</option>
          <option value="zl">Zeeland</option>
          <option value="nb">Noord-Brabant</option>
          <option value="li">Limburg</option>
        </select>

        <input id="filter" type="text" placeholder="Filter op straat / postcode / plaats / urlâ€¦" />
        <button id="aboutBtn" class="secondary-btn" type="button">Over deze kaart</button>

      </div>

      <div id="list"></div>

    </aside>

    <main id="map"></main>

  </div>

  <!-- Mobile-only floating button to reopen the list -->
  <button id="openListBtn" type="button">Lijst</button>

  <div id="aboutModal" class="about-modal" aria-hidden="true">
    <section class="about-card" role="dialog" aria-modal="true" aria-labelledby="aboutTitle">
      <div class="about-head">
        <div id="aboutTitle" class="about-title">Over deze kaart</div>
        <button id="aboutCloseBtn" class="about-close" type="button" aria-label="Sluiten">Sluiten</button>
      </div>
      <div class="about-body">
        <p>
          Dit is een initiatief van Imkervereniging Leiden e.o. De kaart is onderdeel van een
          samenwerkingsverband tussen NBV Imkersverenigingen Leiden, Den Haag, Oegstgeest en
          Stadsimkers Schiedam en gemeenten in dit gebied. Het kan gebruikt worden voor het
          plaatsen van <i>Spring Trapping</i> vallen rond de vindplaatsen van nesten van Aziatische hoornaars
          van vorig jaar, geruimd of niet.
        </p>
        <p>
          De locaties zijn gebaseerd op geschoonde gegevens van waarneming.nl en verdeeld over
          verschillende delen in Nederland. De data is rechtstreeks te downloaden via:
        </p>

        <h3>Focusgemeenten (werkgebied samenwerkingsverband)</h3>
        <p>kaart: <a href="/?dataset=focus" target="_blank" rel="noopener">http://springtrapping.nl/?dataset=focus</a></p>
        <p>data: <a href="/data_focus_gemeenten.csv" download="data_focus_gemeenten.csv">http://springtrapping.nl/data_focus_gemeenten.csv</a></p>

        <h3>Hotspots (waarnemingen dit jaar)</h3>
        <p>kaart: <a href="/?dataset=hotspot" target="_blank" rel="noopener">http://springtrapping.nl/?dataset=hotspot</a></p>
        <p>data: <a href="/data_hotspots.csv" download="data_hotspots.csv">http://springtrapping.nl/data_hotspots.csv</a></p>

        <h3>Overige datasets</h3>
        <p>Noord-Nederland: <a href="/?dataset=noord" target="_blank" rel="noopener">kaart</a> | <a href="/data_noord_nederland.csv" download="data_noord_nederland.csv">data</a></p>
        <p>Midden-Nederland: <a href="/?dataset=midden" target="_blank" rel="noopener">kaart</a> | <a href="/data_midden_nederland.csv" download="data_midden_nederland.csv">data</a></p>
        <p>Zuid-Holland: <a href="/?dataset=zh" target="_blank" rel="noopener">kaart</a> | <a href="/data_zuid_holland.csv" download="data_zuid_holland.csv">data</a></p>
        <p>Zeeland: <a href="/?dataset=zl" target="_blank" rel="noopener">kaart</a> | <a href="/data_zeeland.csv" download="data_zeeland.csv">data</a></p>
        <p>Noord-Brabant: <a href="/?dataset=nb" target="_blank" rel="noopener">kaart</a> | <a href="/data_noord_brabant.csv" download="data_noord_brabant.csv">data</a></p>
        <p>Limburg: <a href="/?dataset=li" target="_blank" rel="noopener">kaart</a> | <a href="/data_limburg.csv" download="data_limburg.csv">data</a></p>
      </div>
    </section>
  </div>

  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script src="./app.js"></script>

</body>
</html>
